<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usuarios</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <!--HOJA DE ESTILOS-->
    <link rel="stylesheet" type="text/css" href="css/estilos.css">
</head>

<body>
    <div class="container">
        <div class="d-flex justify-content-center h-100">
            <div class="card">
                <div class="card-header">
                    <h3>MisionTIC</h3>
                    <div class="d-flex justify-content-end social_icon">
                        <span><i class="fab fa-facebook-square"></i></span>
                        <span><i class="fab fa-google-plus-square"></i></span>
                        <span><i class="fab fa-twitter-square"></i></span>
                    </div>
                </div>
                <div class="card-body">
                    <form>
                        <div class="input-group form-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                            </div>
                            <input type="text" class="form-control" placeholder="Usuario" id="user">
                        </div>
                        <div class="input-group form-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-key"></i></span>
                            </div>
                            <input type="password" class="form-control" placeholder="Password" id="pass">
                        </div>
                        <div class="row align-items-center remember">
                            <input type="checkbox">Recordarme</div>
                        <div class="form-group">
                            <input type="button" value="Ingresar" class="btn float-right login_btn" onclick="validarUsuario();">
                        </div>
                    </form>
                </div>
                <div class="card-footer">
                    <div class="d-flex justify-content-center links">
                        No tienes una cuenta?<a href="#">Registrate</a>
                    </div>
                    <div class="d-flex justify-content-center">
                        <a href="#">Olvidasde tu comtraseña?</a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- JAVASCRIPT -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script src="js/request.js"></script>
    <!--JAVASRCIPT-->
    <script>
        async function validarUsuario() {
            let nombre_user = document.getElementById('user').value;
            let password_name = document.getElementById('pass').value;
            // let request = sendRequest('usuario/list', 'GET', '');


            let url = "http://localhost:8080/usuario/list"

            let response = await fetch(url)
            let data = await response.json()
            data.forEach(element => {
                console.log(data)
                if (nombre_user != element.nombre_usuario) {
                    alert("nombre de usuario incorrecto")
                    location.reload()
                }

                if (password_name != element.password) {
                    alert("contraseña incorrecta")
                    location.reload()
                }

                if (nombre_user == element.nombre_usuario && password_name == element.password) {

                    window.location = 'menu.html';
                }

            })
        }





        /*request.onload = function() {
            let datos = request.response;
            console.log(datos)
            datos.forEach(element => {
                if (nombre_user == element.nombre_usuario) {
                    if (password_name == element.password) {
                        window.location = 'menu.html';
                    } else {
                        alert("¡Password incorrecto!");
                    }
                } else {
                    alert("Usuario incorrecto!");
                }
            });
        }*/

        // request.onerror = function() {
        //     alert("¡Error al cargar los datos!");
        // }


        /*
        <select class="form-select" aria-label="Default select example">
        <option selected>Open this select menu</option>
        <option value="1">One</option>
        <option value="2">Two</option>
        <option value="3">Three</option>
        </select>
        */
    </script>
</body>

</html>